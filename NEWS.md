# SimSpin v2.0.4 News
### Authour: Kate Harborne
### Last edit: 28/09/21

Below is a table containing a summary of all changes made to SimSpin, since the date this file was created on 26/08/2021. 

| Date     	| Summary of change                                                                                                                                                                                                                                                          	| Version 	| Commit                                   	|
|----------	|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------	|---------	|------------------------------------------	|
| 26/08/21 	| Adjusting the images output from the `build_datacube()` function to have clearer labels -  images until v2.0.3 have been produced as raw particle images before convolution with a PSF,  though this was unclear. To improve, the following changes have been implemented: 	| 2.0.4   	| b6b6089a6295d2a47794be100e04494261e79476 	|
|          	| (1) `raw_images` output as a list of arrays. These images contain the raw binned particle data.  Specific images included depends on the `method` chosen in the `telescope()` function.                                                                                    	|         	|                                          	|
|          	| (2) `observed_images` output as a list of arrays. These images are produced by collapsing the  observed cube to produce kinematic maps. The observed maps from a `method="spectral"` cube  will be `NULL`, as these would be produced using pPXF.                          	|         	|                                          	|
|          	| Required changes made to `write_FITS_file()` function to deal with the new list format.                                                                                                                                                                                    	|         	|                                          	|
|          	| Tests added include:                                                                                                                                                                                                                                                       	|         	|                                          	|
|          	| (1) Expecting all output data cubes to have length = 4.                                                                                                                                                                                                                    	|         	|                                          	|
|          	| (2) Expecting all `mode="spectral"` outputs to have `raw_images` as a list, length = 3, and `observed_images = NULL`.                                                                                                                                                      	|         	|                                          	|
|          	| (3) Expecting all `mode="velocity"` outputs to have `raw_images` as a list, length = 6, and `observed_images` as a list, length = 3.                                                                                                                                       	|         	|                                          	|
|          	| (4) When `mass_flag=T`, there should be an array image in each of the lists that is called `mass_image` rather than `flux_image`.                                                                                                                                          	|         	|                                          	|
| 20/09/21 	| Adding in optional Voronoi binning to increas particle counts per pixel. Unfinished at this stage, but introduces no breaking changes. New minor version number will be included once implemented.                                                                         	| 2.0.5   	| 2d1dd7f802d67fe9dd286888923f3ac1f9ea5889 	|
| 11/11/21 	| A few updates to `build_datacube()` -                                                                                                                                                                                                                                      	|         	|                                          	|
|          	| (1) When bluring velocity cubes, objects were being returned with the name `spectral_cube` despite the v2.0.4 updates. This has now been raised in isue #16 and fixed in latest commit.                                                                                    	|         	| 07e9a099c3fdfb5ae4ddbf587a0bf8b191b86f12 	|
|          	| (2) No particles images were generated in spectral mode. This was raised in issue #15 and solved in later commit. Spectral mode will now return an image containing the number of particles per pixel within the `raw_images` header.                                      	|         	|                                          	|
|          	| (3) Adding these raw images as HDU in the spectral FITS file produced. All raw images included so 4 extra HDU.                                                                                                                                                             	|         	|                                          	|
|          	| Tests added include:                                                                                                                                                                                                                                                       	|         	|                                          	|
|          	| (1) Check that in `mode = velocity` and `blur = T`, returned object includes an array named `velocity_cube` and not `spectral_cube`.                                                                                                                                       	|         	|                                          	|
|          	| (2) Update the number of expected images in the `raw_images` header to be 4 rather than 3 (now with added particle number image for spectral mode).                                                                                                                        	|         	|                                          	|
